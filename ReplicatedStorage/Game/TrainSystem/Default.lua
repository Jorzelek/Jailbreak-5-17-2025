-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

-- Bytecode (Base64):
-- BgNIBG5leHQLR2V0Q2hpbGRyZW4IQmFzZVBhcnQDSXNBCFZlbG9jaXR5C1JvdFZlbG9jaXR5C1NldFZlbG9jaXR5BHRpY2sKRGlzY29ubmVjdARFbnVtC0Vhc2luZ1N0eWxlBFF1YWQPRWFzaW5nRGlyZWN0aW9uBUluT3V0CEdldFZhbHVlBkNGcmFtZQNuZXcLUHJpbWFyeVBhcnQEU2l6ZQFYAkMxCUhlYXJ0YmVhdAdDb25uZWN0BERvb3IIdG9zdHJpbmcORmluZEZpcnN0Q2hpbGQJV2VsZEFsbFRvBU1vdG9yCEFuY2hvcmVkDURvb3JPcGVuRnVuY3MJc2V0dXBEb29yBU1vZGVsBEJhc2UGTGVuZ3RoBFdlbGQORnJvbnRCb2dleVJvb3QNQmFja0JvZ2V5Um9vdApCbGFua01vdG9yCkZyb250Qm9nZXkJQmFja0JvZ2V5CFBvc2l0aW9uB1ZlY3RvcjMJTWFnbml0dWRlD0JvZ2V5TW90b3JGcm9udA5Cb2dleU1vdG9yQmFjaxBCb2dleU9mZnNldEZyb250D0JvZ2V5T2Zmc2V0QmFjawhTa2VsZXRvbgdNYWtlQ2FyBVNwZWVkEUNhbGN1bGF0ZVBvc2l0aW9uBk9mZnNldARVbml0DXRvT2JqZWN0U3BhY2ULSW52ZXJ0Qm9nZXkHaW52ZXJzZQJDMARsZXJwB01vdmVDYXIHRGVzdHJveQpEZXN0cm95Q2FyBGdhbWUKUnVuU2VydmljZQpHZXRTZXJ2aWNlDFR3ZWVuU2VydmljZRFSZXBsaWNhdGVkU3RvcmFnZQdyZXF1aXJlA1N0ZAVKb2ludAZzY3JpcHQGUGFyZW50EFRyYWluU3lzdGVtVXRpbHMACAwDAQAAABikAwEAAAAAQLwEAGgCAAAAnwQCAxcDDgBvCgMAvAgH/gQAAACfCAMCDggEADABB4UFAAAAMAIHqgYAAAD7CAAAUgkHAFIKAQBSCwIAnwgEAW4D8f8CAAAAqQMBAIIDAgAHAwEEAAAAQAMCAwMDBAMFAwYACQcBGAAAAAAAAAEAAAAAAQABAAIAAAAA+wAHAAoAAAAACwAFAAAAKKQAAQAAAABAnwABAvsCAAAmAQACPgIBAowDAQB9AwYAAgAAAPsDAQC8AwMaAwAAAJ8DAgGMAgEA+wMCAFIFAgCkBgcA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

-- Decompiled by Krnl

local v_u_1 = game:GetService("RunService")
local v_u_2 = game:GetService("TweenService")
local v3 = game:GetService("ReplicatedStorage")
local v_u_4 = require(v3.Std.Joint)
local v_u_5 = require(script.Parent.TrainSystemUtils)
local function v_u_13(p6, p7, p8)
	-- upvalues: (copy) v_u_13
	local v9 = next
	local v10, v11 = p6:GetChildren()
	for _, v12 in v9, v10, v11 do
		if v12:IsA("BasePart") then
			v12.Velocity = p7
			v12.RotVelocity = p8
		end
		v_u_13(v12, p7, p8)
	end
	return true
end
return {
	["MakeCar"] = function(p_u_14)
		-- upvalues: (copy) v_u_4, (copy) v_u_2, (copy) v_u_1
		local v15 = p_u_14.Model
		local v_u_16 = p_u_14.Base
		local v17 = p_u_14.Length
		v_u_4.WeldAllTo(v15.Model, v_u_16)
		v_u_4.Weld(v15.FrontBogeyRoot, v_u_16)
		v_u_4.Weld(v15.BackBogeyRoot, v_u_16)
		local v18 = v_u_4.BlankMotor(v15.FrontBogey, v15.FrontBogeyRoot)
		local v19 = v_u_4.BlankMotor(v15.BackBogey, v15.BackBogeyRoot)
		v15.FrontBogeyRoot.Anchored = false
		v15.BackBogeyRoot.Anchored = false
		v15.FrontBogey.Anchored = false
		v15.BackBogey.Anchored = false
		v_u_16.Anchored = true
		local v20 = v15.FrontBogeyRoot.Position
		local v21 = v_u_16.CFrame
		local v22 = -v17 * 0.5
		local v23 = (v20 - v21 * Vector3.new(0, 0, v22)).Magnitude
		local v24 = v15.BackBogeyRoot.Position
		local v25 = v_u_16.CFrame
		local v26 = v17 * 0.5
		local v27 = (v24 - v25 * Vector3.new(0, 0, v26)).Magnitude
		p_u_14.BogeyMotorFront = v18
		p_u_14.BogeyMotorBack = v19
		p_u_14.BogeyOffsetFront = v23
		p_u_14.BogeyOffsetBack = v27
		local v_u_28 = v15:FindFirstChild("Skeleton")
		if v_u_28 then
			p_u_14.DoorOpenFuncs = {}
			local function v37(p29)
				-- upvalues: (copy) v_u_28, (ref) v_u_4, (copy) v_u_16, (copy) p_u_14, (ref) v_u_2, (ref) v_u_1
				local v_u_30 = v_u_28:FindFirstChild("Door" .. tostring(p29))
				if v_u_30 then
					v_u_4.WeldAllTo(v_u_30, v_u_30.PrimaryPart)
					local v_u_31 = v_u_4.Motor(v_u_30.PrimaryPart, v_u_16)
					v_u_30.PrimaryPart.Anchored = false
					p_u_14.DoorOpenFuncs[p29] = function()
						-- upvalues: (ref) v_u_2, (copy) v_u_31, (copy) v_u_30, (ref) v_u_1
						local v_u_32 = tick()
						local v_u_33 = nil
						local function v36()
							-- upvalues: (copy) v_u_32, (ref) v_u_33, (ref) v_u_2, (ref) v_u_31, (ref) v_u_30
							local v34 = (tick() - v_u_32) / 1
							if v34 >= 1 then
								v_u_33:Disconnect()
								v34 = 1
							end
							local v35 = v_u_2:GetValue(v34, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut)
							v_u_31.C1 = CFrame.new(v_u_30.PrimaryPart.Size.X * v35, 0, 0)
						end
						v_u_33 = v_u_1.Heartbeat:Connect(v36)
					end
				end
			end
			v37(1)
			v37(2)
		end
	end,
	["MoveCar"] = function(p38, p39, _, p40)
		-- upvalues: (copy) v_u_5
		local _ = p39.Speed
		local v41, v42 = v_u_5.CalculatePosition(p39, p39.Offset + p40 + p38.BogeyOffsetBack)
		local v43, v44 = v_u_5.CalculatePosition(p39, p39.Offset + p40 + p38.Length - p38.BogeyOffsetFront)
		local v45 = (v43 - v41).Unit
		local v46 = CFrame.new(Vector3.new(), v45)
		p38.Base.CFrame = v46 + (v41 + v43) * 0.5
		local v47 = v44:toObjectSpace(v46)
		local v48 = v42:toObjectSpace(v46)
		if p38.InvertBogey then
			v47 = v47:inverse()
			v48 = v48:inverse()
		end
		p38.BogeyMotorFront.C0 = p38.BogeyMotorFront.C0:lerp(v47, 0.1)
		p38.BogeyMotorBack.C0 = p38.BogeyMotorBack.C0:lerp(v48, 0.1)
	end,
	["DestroyCar"] = function(p49)
		p49.Model:Destroy()
		return true
	end
}
