-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

-- Bytecode (Base64):
-- BgNKC19fQ2xhc3NOYW1lBmFzc2VydA5SZWdpc3Rlck1vZHVsZQRNZXRhBElzdjIEbmV4dAR0eXBlBXRhYmxlDERlZXBUcmFuc2ZlcghPY2N1cGllZAVWYWx1ZQ5GaW5kRmlyc3RDaGlsZAZQbGF5ZXIETWFpZApEb0NsZWFuaW5nC01vdW50UGxheWVyC1VubW91bnRTZWF0BnVwZGF0ZQJJZAlDbGFzc05hbWUFZXJyb3I2Tm8gdmVoaWNsZSBtb2R1bGUgaGFzIGJlZW4gcmVnaXN0ZXJlZCBmb3IgY2xhc3MgbmFtZTogCkZyb21QYWNrZXQDbmV3BHdhcm4aTm8gbWFpZCBmb3IgdmVoaWNsZSBwYWNrZXQFU2VhdHMTVmVoaWNsZSBuZWVkcyBzZWF0cwRQYXJ0ClBsYXllck5hbWUMV2FpdEZvckNoaWxkB0NoYW5nZWQHQ29ubmVjdAhHaXZlVGFzawZpbnNlcnQNUHJvY2Vzc1BhY2tldAZyZW1vdmUHRGVzdHJveRByZW1vdmVJZEZyb21MaXN0BmNyZWF0ZQdkZXN0cm95BHRhc2sEd2FpdBp5aWVsZEZvckFsbFZhbHVlc1BvcHVsYXRlZBtjcmVhdGVUYWJsZUZyb21PYmplY3RWYWx1ZXMUb2JzZXJ2ZU9uZUNoaWxkTmFtZWQFTW9kZWwLQm91bmRpbmdCb3gMRm9sbG93UGxheWVyCGoxMG5zNXAzBUV2ZW50AmVtE1ZlaGljbGVTeXN0ZW1QYWNrZXQFU3RhcnQESW5pdBBHZXRWZWhpY2xlUGFja2V0Am9zBWNsb2NrFFdhaXRGb3JWZWhpY2xlUGFja2V0DUdldFBsYXllclNlYXQEZ2FtZRFDb2xsZWN0aW9uU2VydmljZQpHZXRTZXJ2aWNlEFVzZXJJbnB1dFNlcnZpY2URUmVwbGljYXRlZFN0b3JhZ2UHcmVxdWlyZQNTdGQPUnhJbnN0YW5jZVV0aWxzA0FwcBRTdHJlYW1pbmdIZWxwZXJVdGlscwpUYWJsZVV0aWxzB1BsYXllcnMGQmluZGVyC0xvY2FsUGxheWVyABAEAQEAAAAPTQMA5QAAAABHAwIAAAAAgKkCAAGpAgEAuwECAqQBAgAAABBAnwECAfsBAABNAgDlAAAAAGoAAQKCAAEAAwMBAwIEAAAQQAAUAwEY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

-- Decompiled by Krnl

game:GetService("CollectionService")
game:GetService("UserInputService")
local v1 = game:GetService("ReplicatedStorage")
local v_u_2 = require(v1.Std.RxInstanceUtils)
local v_u_3 = require(v1.App.StreamingHelperUtils)
local v_u_4 = require(v1.Std.TableUtils)
local v_u_5 = game:GetService("Players")
local v_u_6 = require(v1.Std.Binder)
local v_u_7 = require(v1.Std.Maid)
local v_u_8 = v_u_5.LocalPlayer
local v_u_9 = {}
local v_u_10 = {}
local v_u_11 = {}
local function v_u_17(p12)
	-- upvalues: (copy) v_u_9
	for v13 = 1, #v_u_9 do
		local v14 = v_u_9[v13]
		for v15 = 1, #v14.Seats do
			local v16 = v14.Seats[v15]
			if v16.Occupied and v16.Player == p12 then
				return v14, v16
			end
		end
	end
	return nil
end
return {
	["Init"] = function(p18)
		-- upvalues: (copy) v_u_10, (copy) v_u_11, (copy) v_u_7, (copy) v_u_5, (copy) v_u_9, (copy) v_u_6, (copy) v_u_3, (copy) v_u_4, (copy) v_u_2, (copy) v_u_8
		local _ = p18.Event
		local v19 = p18.em
		local function v_u_24(p20, p21)
			-- upvalues: (copy) v_u_24
			for v22, v23 in next, p20 do
				if type(v23) == "table" then
					v_u_24(v23, p21)
				else
					p21[v22] = v23
				end
			end
		end
		local function v_u_37(p_u_25)
			-- upvalues: (ref) v_u_10, (ref) v_u_11, (ref) v_u_7, (ref) v_u_5, (ref) v_u_9, (copy) v_u_24
			assert(p_u_25)
			local v26 = p_u_25.Id
			assert(v26)
			if v_u_10[v26] == nil then
				local v27 = v_u_11[p_u_25.ClassName]
				if v27 == nil then
					error("No vehicle module has been registered for class name: " .. p_u_25.ClassName)
				end
				if v27.FromPacket then
					v27.FromPacket(p_u_25)
				else
					p_u_25 = v27.new(p_u_25)
				end
				if p_u_25.Maid == nil then
					warn("No maid for vehicle packet", p_u_25)
				end
				local v28 = p_u_25.Seats
				assert(v28, "Vehicle needs seats")
				local v29 = p_u_25.Maid
				for _, v_u_30 in p_u_25.Seats do
					local v_u_31 = v_u_30.Part:WaitForChild("PlayerName")
					v_u_30.Occupied = false
					v_u_30.Maid = v_u_7.new()
					local function v35()
						-- upvalues: (copy) v_u_30, (ref) v_u_5, (copy) v_u_31, (ref) p_u_25
						local v32 = v_u_30.Occupied
						local v33 = v_u_5:FindFirstChild(v_u_31.Value)
						local v34 = v33 ~= nil
						if v34 then
							v_u_30.Player = v33
							v_u_30.Occupied = v34
							v_u_30.Maid:DoCleaning()
						end
						if v34 ~= v32 then
							if v34 then
								p_u_25:MountPlayer(v_u_30.Player, v_u_30)
							else
								p_u_25:UnmountSeat(v_u_30)
							end
						end
						if not v34 then
							v_u_30.Player = v33
							v_u_30.Occupied = v34
							v_u_30.Maid:DoCleaning()
						end
					end
					v35()
					v29:GiveTask(v_u_31.Changed:Connect(v35))
				end
				local v36 = v_u_9
				table.insert(v36, p_u_25)
				v_u_10[v26] = p_u_25
			elseif v_u_10[v26].Meta ~= nil then
				v_u_24(p_u_25, v_u_10[v26].Meta)
			else
				v_u_24(p_u_25, v_u_10[v26])
			end
		end
		local function v_u_44(p38)
			-- upvalues: (ref) v_u_9, (ref) v_u_10
			for v39 = #v_u_9, 1, -1 do
				local v40 = v_u_9[v39]
				local v41
				if v40.Meta ~= nil then
					v41 = v40.Meta.Id
				else
					v41 = v40.Id
				end
				assert(v41)
				if v41 == p38 then
					v_u_10[v41] = nil
					table.remove(v_u_9, v39)
					if v40.Seats then
						for v42 = 1, #v40.Seats do
							local v43 = v40.Seats[v42]
							if v43.Occupied then
								v40:UnmountSeat(v43)
								v43.Maid:DoCleaning()
							end
						end
					end
					v40:Destroy()
				end
			end
		end
		v_u_6.new("VehicleSystemPacket", function(p45)
			-- upvalues: (ref) v_u_7, (ref) v_u_3, (ref) v_u_4, (copy) v_u_37, (copy) v_u_44, (ref) v_u_2
			task.wait()
			local v46 = v_u_7.new()
			v_u_3.yieldForAllValuesPopulated(p45)
			local v_u_47 = v_u_4.createTableFromObjectValues(p45)
			local v_u_48
			if v_u_47.Meta ~= nil then
				v_u_48 = v_u_47.Meta.Id
			else
				v_u_48 = v_u_47.Id
			end
			local function v_u_49()
				-- upvalues: (ref) v_u_44, (ref) v_u_48
				v_u_44(v_u_48)
			end
			v46:GiveTask(v_u_2.observeOneChildNamed(v_u_47.Model, "BoundingBox", function(_, p50)
				-- upvalues: (ref) v_u_37, (copy) v_u_47, (copy) v_u_49
				v_u_37(v_u_47)
				p50:GiveTask(v_u_49)
			end))
			return v46
		end):Start()
		function v19.j10ns5p3(p51)
			-- upvalues: (ref) v_u_10, (ref) v_u_8
			local v52 = v_u_10[p51]
			assert(v52)
			v52:FollowPlayer(v_u_8)
		end
	end,
	["RegisterModule"] = function(p53)
		-- upvalues: (copy) v_u_11
		local v54 = p53.__ClassName ~= nil
		assert(v54)
		v_u_11[p53.__ClassName] = p53
	end,
	["GetVehiclePacket"] = v_u_17,
	["WaitForVehiclePacket"] = function(p55)
		-- upvalues: (copy) v_u_17
		local v56 = os.clock()
		while os.clock() - v56 < 5 do
			local v57, v58 = v_u_17(p55)
			if v57 ~= nil then
				return v57, v58
			end
			task.wait()
		end
		return nil
	end,
	["GetPlayerSeat"] = function(p59, p60)
		local v61 = p59 ~= nil
		assert(v61)
		local v62 = p60 ~= nil
		assert(v62)
		for v63 = 1, #p59.Seats do
			local v64 = p59.Seats[v63]
			if v64.Occupied and v64.Player == p60 then
				return v64
			end
		end
		return nil
	end
}
