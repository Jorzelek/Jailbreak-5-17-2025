-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

-- Bytecode (Base64):
-- BgNCHVRyYWNraW5nU3BvdGxpZ2h0VGFyZ2V0VXNlcklkDEdldEF0dHJpYnV0ZRFHZXRQbGF5ZXJCeVVzZXJJZAtUcmFja1BsYXllcgxTdG9wVHJhY2tpbmcMdXBkYXRlVGFyZ2V0A25ldwxzZXRtZXRhdGFibGUFUGl2b3QMV2FpdEZvckNoaWxkFlRyYWNraW5nU3BvdGxpZ2h0TW90b3IFbW90b3ICb3MFY2xvY2sHX2xhc3REdAhfbWF4RFlhdwpfbGFzdFBpdGNoCF9sYXN0WWF3DF9waXRjaFNwcmluZwpfeWF3U3ByaW5nBG1haWQZR2V0QXR0cmlidXRlQ2hhbmdlZFNpZ25hbAdDb25uZWN0CEdpdmVUYXNrCUNoYXJhY3RlcgtQcmltYXJ5UGFydAhQb3NpdGlvbhFNb3ZlVG93YXJkc1RhcmdldAtnZXRIdW1hbm9pZANvYmoDVG9wDkZpbmRGaXJzdENoaWxkA1RpcAZDRnJhbWUKTG9va1ZlY3RvchFpc1BvaW50SW5DeWxpbmRlchVJc0luVHJhY2tpbmdTcG90bGlnaHQMU2V0QXR0cmlidXRlAkMxDHRyYWNraW5nTWFpZAlIZWFydGJlYXQSUG9pbnRUb09iamVjdFNwYWNlEm9mZnNldExvb2tBdFRhcmdldAF4AXkBeg5zaG9ydEFuZ2xlRGlzdARtYXRoBWNsYW1wCVNldFRhcmdldAZBbmdsZXMEZ2FtZQdQbGF5ZXJzCkdldFNlcnZpY2URUmVwbGljYXRlZFN0b3JhZ2UKUnVuU2VydmljZQdyZXF1aXJlA1N0ZApCYXNlT2JqZWN0BkJpbmRlcg5DaGFyYWN0ZXJVdGlscwlHZW9tVXRpbHMETWFpZAZTcHJpbmcHX19pbmRleBFUcmFja2luZ1Nwb3RsaWdodAAJBQADAAAAGfsAAABvAgAAvAAAEgEAAACfAAMCDgAGAPsBAQBSAwAAvAEBYQIAAACfAQMCZQABAMYBAAAOAQYA+wICAFIEAQC8AgKNAwAAAJ8CAwGCAAEA+wICALwCAtEEAAAAnwICAYIAAQAFAwEDAgMDAwQDBQAiBgEYAAAAAAABAAAAAAAAAAEBAAAAAAACAAAAAiMAAAAACQEEAAAAYfsCAABNAQLvAAAAAFICAACfAQIC+wQBAJ49AQQEAAAAUgMBAKQCAgAAABBAnwIDAW8EAwC8AgDTBAAAAJ8CAwJvBAUAvAIC0wQAAACfAgMCMAIB9gYAAACkAwkAACBwgJ8DAQIwAwFSCgAAAG8DCwAwAwGRDAAAAIwDAAAwAwENDQAAAIwDAAAwAwESDgAAAPsEAgBNAwTvAAAAAE0EAQ0NAAAAjAUAAG8GDwCMBw8AnwMFAjADAaMQAAAA+wQCAE0DBO8AAAAATQQBEg4AAACMBQAAbwYPAIwHDwCfAwUCMAMBxxEAAADZAwAAEgAAABICAwASAAEATQQBFhIAAABvCBMAvAYAFhQAAACfBgMCUggDALwGBscVAAAAnwYDALwEBP0WAAAAnwQAAW8GEwC8BAASFwAAAJ8EAwIOBAYA+wUDAFIHBAC8BQVhGAAAAJ8FAwJlAAEAxgUAAA4FBQBSCAUAvAYBjRkAAACfBgMBggECALwGAdEaAAAAnwYCAYIBAgAbAwcDCAQAABBAAwkDCgMLAwwDDQMOBAAgcIADDwLg8Jx2LxvkPwMQAxEDEgIzMzMzMzPjPwMTAxQDFQMBAxYDFwMYAwIDAwMEAwUBABAHARgAAAAAAAEAAAAAAAACAAAAAAAAAAMAAgAAAAABAAACAAABAAACAAAAAAAAAAAAAAEAAAAAAAAAAAAAAgAAAAkAAAAAAAAAAAAAAAD4AAAAAQAAAAAAAAABAQAAAAACAAAGEQAAAAALAAQAAABa+wEAAE0AAWkAAAAAKwAFAPsAAQC8AADRAQAAAJ8AAgGCAAEA+wIAAE0BAmkAAAAATQABmwIAAAArAAUA+wABALwAANEBAAAAnwACAYIAAQD7AwAATQIDaQAAAABNAQKbAgAAAE0AATsDAAAA+wEBAFIDAAC8AQGYBAAAAJ8BAwH7AgIATQEClgUAAAD7AwAATQIDaQAAAACfAQICKwEBAIIAAQD7AwEATQIDEwYAAABvBAcAvAICAwgAAACfAgMCbwQJALwCAgMIAAAAnwIDAk0DAjsDAAAATQUChQoAAABNBAVoCwAAAPsGAwBNBQa6DAAAAFIGAABSBwMAUggEAIwJyABvCg0AnwUGAg4FCwBvBw4AvAUBEg8AAACfBQMCKwUQAG8HDgCpCAEAvAUBLhAAAACfBQQBggABAG8HDgC8BQESDwAAAJ8FAwIOBQUAbwcOAMYIAAC8BQEuEAAAAJ8FBAGCAAEAEQMZAwUDGgMbAxwDHQMeAx8DIAMhAyIDIwMkAgAAAAAAAARAAyUDAgMmADMAARgAAAAAAQAAAAECAAAAAAABAAAAAQIAAAAAAAABAAAAAAIAAAAAAAABAQIAAAAAAAAAAAAAAQABAAAABQAAAAAAAAAAAAEAAAAAAQAAAAAAAgAAAAABAAAAAAI0AAAAAAUAAgAAAA/7AQAATQABlgAAAAD7AgEATQECaQEAAACfAAICKwABAIIAAQBvAwIAxgQAALwBAC4DAAAAnwEEAYIAAQAEAx0DGQMlAyYAUgABGAAAAAAAAAABAQIAAAAAAVMAAAAAAgABAAAAEfsAAACMAQAAMAEADQAAAAD7AAAAjAEAADABABIBAAAA+wEAAE0AAfYCAAAApAEFAAAQMICfAQECMAEAzAYAAACCAAEABwMRAxIDDAMiAwcEABAwgAMnAFkAARgAAAAAAQAAAAEAAAAAAAAAA1oAAAAACAIEAAAAIvsDAABNAgPvAAAAAJ8CAQJNAwAWAQAAADACAyICAAAA+wYBAE0FBv0DAAAA2QcAABIAAQASAAAAEgICABICAwC8BQXHBAAAAJ8FAwC8AwL9BQAAAJ8DAAHZBQEAEgICABIAAQC8AwL9BQAAAJ8DAwHZBQIAEgAAALwDAv0FAAAAnwMDAYIAAQAGAwcDFQMoAykDFwMYAwIDBDAEARgAAAAAAQAAAAEAAAAAAAAAAAAAAAAAHwAAAAAABwAAAAAHMQAAAAADAQAAAAAGTQEAFgAAAADGAgAAMAIBIgEAAACCAAEAAgMVAygAYQUBGAAAAAAAAWIAAAAAFQIBAAAAhgGkAgIAAAQAgJ8CAQJNBABSAwAAACYDAgQwAgBSAwAAAE0EABMEAAAAbwYFALwEBAMGAAAAnwQDAk0FABMEAAAAbwcHALwFBQMGAAAAnwUDAm8IBQC8BgUDBgAAAJ8GAwJvCQgAvAcFAwYAAACfBwMCTQgGhQkAAABNCgc7CgAAALwICMYLAAAAnwgDAk0JBIUJAAAAUgsBALwJCcYLAAAAnwkDAvsLAABNCgtNDAAAAE0LCJkNAAAATQwImA4AAADGDQAATQ4JmQ0AAABNDwmYDgAAAE0QCZsPAAAAnwoHA00MAA0QAAAA+w8AAE0OD6kRAAAATQ8ADRAAAABSEAsAnw4DAk0RAJESAAAAORARAAkPEANNEQCREgAAAAkQEQNMLgACpA0VAABQMIGfDQQCQwwMDTAMAA0QAAAATQwAEhYAAAD7DwAATQ4PqREAAABNDwASFgAAAFIQCgCfDgMCTREAkRIAAAA5EBEACQ8QA00RAJESAAAACRARA0wuAAKkDRUAAFAwgZ8NBAJDDAwNMAwAEhYAAABNDACjFwAAAE0OAA0QAAAAvAwMlxgAAACfDAMCTQ0AxxkAAABNDwASFgAAALwNDZcYAAAAnw0DAk0OAPYaAAAApBAcAABskICMEQAAUhINAIwTAACfEAQCpBEcAABskIBSEgwAjBMAAIwUAACfEQQCCQ8QETAPDswdAAAAggABAB4DDQMOBAAEAIADDwMeAwkDIAMfAyEDIgMbAyoDKwMsAy0DLgMRAy8DEAMwAzEEAFAwgQMSAxMDMgMUAwwDMwQAbJCAAycAZBwBGAAAAAEAAAEAAgAAAAAAAQAAAAAAAQAAAAEAAAABAAAAAAAAAQAAAAAAAgAAAAAAAAAAAAAAAAAAAgABAAAAAAAAAQAAAAEAAP0AAAAAAAAFAAEAAAAAAAABAAAAAQAA/QAAAAAAAAYAAAAAAAABAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAADZQAAAAANAAABAgBjowAAAKQAAQAAAABAbwICALwAABYDAAAAnwADAqQBAQAAAABAbwMEALwBARYDAAAAnwEDAqQCAQAAAABAbwQFALwCAhYDAAAAnwIDAqQDBwAAAGBATQUBoQgAAABNBAVLCQAAAJ8DAgKkBAcAAABgQE0GAaEIAAAATQUGfwoAAACfBAICpAUHAAAAYEBNBwGhCAAAAE0GB5YLAAAAnwUCAqQGBwAAAGBATQgBoQgAAABNBwg8DAAAAJ8GAgKkBwcAAABgQE0JAaEIAAAATQgJdg0AAACfBwICpAgHAAAAYEBNCgGhCAAAAE0JCiIOAAAAnwgCAv8JBAAAAAAAMAkJbg8AAACePQkFAwAAAFILCQBSDAMApAoRAAAAAEGfCgMBwAoSABIAAwASAAkAEgAIABIAAAAwCgnvEwAAAMAKFAASAAcAEgACABIABQASAAYAMAoJjRUAAADAChYAMAoJ0RcAAADAChgAEgAGADAKCZgZAAAATQoE7xMAAABvCxoAUgwJAJ8KAwCCCgAAGwM0BAAAAEADNQM2AzcDOAM5BAAAYEADOgM7AzwDPQM+Az8DQANBAwgEAAAAQQYBAwcGBQMEBgYDBQYHAxwDQgQBBQYHAQABGAABAAAAAAABAAAAAAABAAAAAAABAAAAAAAAAQAAAAAAAAEAAAAAAAABAAAAAAAAAQAAAAAAAAEAAAAAAAACAAEAAQAAAAAAAAIAAAAAAAAgAAAAAAAAMQAAAwAAACEAAAAAAAEAAAAACGNR7vOPwtl5UZWEZxpWIGw4wj9z+J1MD/bTEnZWcrP2uJVBvxj14vE=

-- Decompiled by Krnl

local v_u_1 = game:GetService("Players")
local v2 = game:GetService("ReplicatedStorage")
local v_u_3 = game:GetService("RunService")
local v_u_4 = require(v2.Std.BaseObject)
local v5 = require(v2.Std.Binder)
local v_u_6 = require(v2.Std.CharacterUtils)
local v_u_7 = require(v2.Std.GeomUtils)
local v_u_8 = require(v2.Std.Maid)
local v_u_9 = require(v2.Std.Spring)
local v_u_10 = {}
v_u_10.__index = v_u_10
setmetatable(v_u_10, v_u_4)
function v_u_10.new(p_u_11)
	-- upvalues: (copy) v_u_4, (copy) v_u_10, (copy) v_u_9, (copy) v_u_1
	local v_u_12 = v_u_4.new(p_u_11)
	local v13 = v_u_10
	setmetatable(v_u_12, v13)
	v_u_12.motor = p_u_11:WaitForChild("Pivot"):WaitForChild("TrackingSpotlightMotor")
	v_u_12._lastDt = os.clock()
	v_u_12._maxDYaw = 0.6283185307179586
	v_u_12._lastPitch = 0
	v_u_12._lastYaw = 0
	v_u_12._pitchSpring = v_u_9.new(v_u_12._lastPitch, 0, 0.6, 15)
	v_u_12._yawSpring = v_u_9.new(v_u_12._lastYaw, 0, 0.6, 15)
	local function v16()
		-- upvalues: (copy) p_u_11, (ref) v_u_1, (copy) v_u_12
		local v14 = p_u_11:GetAttribute("TrackingSpotlightTargetUserId")
		local v15
		if v14 then
			v15 = v_u_1:GetPlayerByUserId(v14)
		else
			v15 = nil
		end
		if v15 then
			v_u_12:TrackPlayer(v15)
		else
			v_u_12:StopTracking()
		end
	end
	v_u_12.maid:GiveTask(p_u_11:GetAttributeChangedSignal("TrackingSpotlightTargetUserId"):Connect(v16))
	local v17 = p_u_11:GetAttribute("TrackingSpotlightTargetUserId")
	local v18
	if v17 then
		v18 = v_u_1:GetPlayerByUserId(v17)
	else
		v18 = nil
	end
	if v18 then
		v_u_12:TrackPlayer(v18)
		return v_u_12
	else
		v_u_12:StopTracking()
		return v_u_12
	end
end
function v_u_10.TrackPlayer(p_u_19, p_u_20)
	-- upvalues: (copy) v_u_8, (copy) v_u_3, (copy) v_u_6, (copy) v_u_7
	local v21 = v_u_8.new()
	p_u_19.maid.trackingMaid = v21
	v21:GiveTask(v_u_3.Heartbeat:Connect(function()
		-- upvalues: (copy) p_u_20, (copy) p_u_19, (ref) v_u_6, (ref) v_u_7
		if p_u_20.Character then
			if p_u_20.Character.PrimaryPart then
				local v22 = p_u_20.Character.PrimaryPart.Position
				p_u_19:MoveTowardsTarget(v22)
				local v23 = v_u_6.getHumanoid(p_u_20.Character)
				if v23 then
					local v24 = p_u_19.obj:FindFirstChild("Top"):FindFirstChild("Tip")
					local v25 = v24.Position
					local v26 = v24.CFrame.LookVector
					if v_u_7.isPointInCylinder(v22, v25, v26, 200, 2.5) then
						if not v23:GetAttribute("IsInTrackingSpotlight") then
							v23:SetAttribute("IsInTrackingSpotlight", true)
							return
						end
					elseif v23:GetAttribute("IsInTrackingSpotlight") then
						v23:SetAttribute("IsInTrackingSpotlight", nil)
					end
				end
			else
				p_u_19:StopTracking()
				return
			end
		else
			p_u_19:StopTracking()
			return
		end
	end))
	v21:GiveTask(function()
		-- upvalues: (ref) v_u_6, (copy) p_u_20
		local v27 = v_u_6.getHumanoid(p_u_20.Character)
		if v27 then
			v27:SetAttribute("IsInTrackingSpotlight", nil)
		end
	end)
	v21:GiveTask(function()
		-- upvalues: (copy) p_u_19
		p_u_19._lastPitch = 0
		p_u_19._lastYaw = 0
		p_u_19.motor.C1 = CFrame.new()
	end)
end
function v_u_10.StopTracking(p28)
	p28.maid.trackingMaid = nil
end
function v_u_10.MoveTowardsTarget(p29, p30)
	-- upvalues: (copy) v_u_7
	local v31 = os.clock()
	local v32 = v31 - p29._lastDt
	p29._lastDt = v31
	local v33 = p29.obj:FindFirstChild("Pivot")
	local v34 = p29.obj:FindFirstChild("Top")
	local v35 = v34:FindFirstChild("Pivot")
	local v36 = v34:FindFirstChild("Tip")
	local v37 = v35.CFrame:PointToObjectSpace(v36.Position)
	local v38 = v33.CFrame:PointToObjectSpace(p30)
	local v39, v40 = v_u_7.offsetLookAtTarget(v37.x, v37.y, nil, v38.x, v38.y, v38.z)
	local v41 = p29._lastPitch
	local v42 = v_u_7.shortAngleDist(p29._lastPitch, v40)
	local v43 = -p29._maxDYaw * v32
	local v44 = p29._maxDYaw * v32
	p29._lastPitch = v41 + math.clamp(v42, v43, v44)
	local v45 = p29._lastYaw
	local v46 = v_u_7.shortAngleDist(p29._lastYaw, v39)
	local v47 = -p29._maxDYaw * v32
	local v48 = p29._maxDYaw * v32
	p29._lastYaw = v45 + math.clamp(v46, v47, v48)
	local v49 = p29._pitchSpring:SetTarget(p29._lastPitch)
	local v50 = p29._yawSpring:SetTarget(p29._lastYaw)
	p29.motor.C1 = CFrame.Angles(0, v50, 0) * CFrame.Angles(v49, 0, 0)
end
return v5.new("TrackingSpotlight", v_u_10)
