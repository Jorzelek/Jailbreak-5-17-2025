-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

-- Bytecode (Base64):
-- BgNVCEh1bWFub2lkDkZpbmRGaXJzdENoaWxkDUNhbWVyYVN1YmplY3QUb25DaGFyYWN0ZXJTcGVjdGF0ZWQERmlyZQ50cmFja0NoYXJhY3RlcgROYW1lEVNQRUNUQVRFX1RBR19OQU1FCUdldFRhZ2dlZAV0YWJsZQZpbnNlcnQLTG9jYWxQbGF5ZXIJQ2hhcmFjdGVyBGZpbmQEc29ydBBnZXRBbGxDaGFyYWN0ZXJzGU5vIGNoYXJhY3RlcnMgdG8gc3BlY3RhdGUGYXNzZXJ0BG1hdGgGcmFuZG9tDWZpbmROZXdUYXJnZXQJd29ya3NwYWNlDklzRGVzY2VuZGFudE9mFGNoZWNrSWZOZWVkTmV3VGFyZ2V0A0lzQQREaWVkB0Nvbm5lY3QMaHVtYW5vaWREaWVkDmhhbmRsZUh1bWFub2lkBmFjdGl2ZQxzcGVjdGF0ZU1haWQKRG9DbGVhbmluZwNuZXcZR2V0QXR0cmlidXRlQ2hhbmdlZFNpZ25hbAhHaXZlVGFzawVldmVyeQhzcGVjdGF0ZQp1bnNwZWN0YXRlCVNjcmVlbkd1aQxSZXNldE9uU3Bhd24OSWdub3JlR3VpSW5zZXQOWkluZGV4QmVoYXZpb3IERW51bQdTaWJsaW5nEFNwZWN0YXRlU2VsZWN0b3IMZ2V0Q29tcG9uZW50BlBhcmVudBBnZXROZXh0Q2hhcmFjdGVyC29uQ2xpY2tOZXh0C29uQ2xpY2tQcmV2B3VubW91bnQWR2V0UGxheWVyRnJvbUNoYXJhY3RlcgtEaXNwbGF5TmFtZQV0aXRsZQZ1cGRhdGUTdXBkYXRlQ2FtZXJhU3ViamVjdAdndWlNYWlkBHNpemUIcG9zaXRpb24FVURpbTIJZnJvbVNjYWxlA04vQQVtb3VudAlQbGF5ZXJHdWkIU3BlY3RhdGUYR2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsB2hpZGVHdWkHc2hvd0d1aQRnYW1lEUNvbGxlY3Rpb25TZXJ2aWNlCkdldFNlcnZpY2UHUGxheWVycxFSZXBsaWNhdGVkU3RvcmFnZQdyZXF1aXJlBVJvYWN0AlVJBnNjcmlwdA5TcGVjdGF0ZUNvbnN0cwNTdGQETWFpZAhJbnRlcnZhbAZTaWduYWwNQ3VycmVudENhbWVyYQ1jcmVhdGVFbGVt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

-- Decompiled by Krnl

local v_u_1 = game:GetService("CollectionService")
local v_u_2 = game:GetService("Players")
local v3 = game:GetService("ReplicatedStorage")
local v_u_4 = require(v3.Roact)
local v_u_5 = require(v3.Spectate.UI.SpectateSelector)
local v_u_6 = require(script.Parent.SpectateConsts)
local v_u_7 = require(v3.Std.Maid)
local v_u_8 = require(v3.Std.Interval)
local v9 = require(v3.Std.Signal)
local v_u_10 = workspace.CurrentCamera
local v_u_11 = v_u_4.createElement
local v_u_13 = {
	["_tree"] = nil,
	["guiMaid"] = v_u_7.new(),
	["active"] = false,
	["spectateMaid"] = nil,
	["onCharacterSpectated"] = v9.new(),
	["trackCharacter"] = function(p12)
		-- upvalues: (copy) v_u_10, (copy) v_u_13
		if p12 then
			v_u_10.CameraSubject = p12:FindFirstChild("Humanoid")
		else
			v_u_10.CameraSubject = nil
		end
		v_u_13.onCharacterSpectated:Fire(p12)
	end
}
local function v_u_19()
	-- upvalues: (copy) v_u_1, (copy) v_u_6, (copy) v_u_2
	local v14 = {}
	for _, v15 in v_u_1:GetTagged(v_u_6.SPECTATE_TAG_NAME) do
		table.insert(v14, v15)
	end
	local v16 = v_u_2.LocalPlayer.Character
	if table.find(v14, v16) == nil then
		table.insert(v14, v16)
	end
	table.sort(v14, function(p17, p18)
		return p17.Name < p18.Name
	end)
	return v14
end
function v_u_13.findNewTarget()
	-- upvalues: (copy) v_u_19, (copy) v_u_13
	local v20 = v_u_19()
	local v21 = #v20 > 0
	assert(v21, "No characters to spectate")
	local v22 = v20[math.random(1, #v20)]
	v_u_13.trackCharacter(v22)
end
function v_u_13.spectate(p23)
	-- upvalues: (copy) v_u_13, (copy) v_u_7, (copy) v_u_10, (copy) v_u_8
	v_u_13.active = true
	local v_u_24 = v_u_13.spectateMaid
	if v_u_24 then
		v_u_24:DoCleaning()
	else
		v_u_24 = v_u_7.new()
		v_u_13.spectateMaid = v_u_24
	end
	if p23 then
		v_u_13.trackCharacter(p23)
	else
		v_u_13.findNewTarget()
	end
	local function v25()
		-- upvalues: (ref) v_u_10, (ref) v_u_13
		if not (v_u_10.CameraSubject and v_u_10.CameraSubject:IsDescendantOf(workspace)) then
			v_u_13.findNewTarget()
		end
	end
	local function v27()
		-- upvalues: (ref) v_u_10, (ref) v_u_24, (ref) v_u_13
		local v26 = v_u_10.CameraSubject
		if v26 ~= nil and v26:IsA("Humanoid") then
			v_u_24.humanoidDied = v26.Died:Connect(function()
				-- upvalues: (ref) v_u_13
				v_u_13.findNewTarget()
			end)
		end
	end
	local v28 = v_u_10.CameraSubject
	if v28 ~= nil and v28:IsA("Humanoid") then
		v_u_24.humanoidDied = v28.Died:Connect(function()
			-- upvalues: (ref) v_u_13
			v_u_13.findNewTarget()
		end)
	end
	v_u_24:GiveTask(v_u_10:GetAttributeChangedSignal("CameraSubject"):Connect(v27))
	v_u_24:GiveTask(v_u_8.every(1):Connect(v25))
	v_u_24:GiveTask(function()
		-- upvalues: (ref) v_u_13
		v_u_13.active = false
	end)
end
function v_u_13.unspectate()
	-- upvalues: (copy) v_u_13, (copy) v_u_2, (copy) v_u_10
	if v_u_13.spectateMaid then
		v_u_13.spectateMaid:DoCleaning()
	end
	local v29 = v_u_2.LocalPlayer.Character
	if v29 then
		local v30 = v29:FindFirstChild("Humanoid")
		if v30 then
			v_u_10.CameraSubject = v30
		end
	else
		return
	end
end
local function v_u_32(p31)
	-- upvalues: (copy) v_u_11, (copy) v_u_5
	return v_u_11("ScreenGui", {
		["ResetOnSpawn"] = false,
		["IgnoreGuiInset"] = true,
		["ZIndexBehavior"] = Enum.ZIndexBehavior.Sibling
	}, {
		["SpectateSelector"] = v_u_11(v_u_5, p31)
	})
end
function v_u_13.showGui()
	-- upvalues: (copy) v_u_13, (copy) v_u_19, (copy) v_u_10, (copy) v_u_4, (copy) v_u_32, (copy) v_u_2
	v_u_13.guiMaid:DoCleaning()
	local v_u_37 = {
		["size"] = UDim2.fromScale(1, 0.075),
		["position"] = UDim2.fromScale(0.5, 0.75),
		["onClickNext"] = function()
			-- upvalues: (ref) v_u_13, (ref) v_u_19, (ref) v_u_10
			local v33 = v_u_13.spectate
			local v34 = v_u_19()
			v33(v34[(table.find(v34, v_u_10.CameraSubject.Parent) + 1 - 1) % #v34 + 1])
		end,
		["onClickPrev"] = function()
			-- upvalues: (ref) v_u_13, (ref) v_u_19, (ref) v_u_10
			local v35 = v_u_13.spectate
			local v36 = v_u_19()
			v35(v36[(table.find(v36, v_u_10.CameraSubject.Parent) + -1 - 1) % #v36 + 1])
		end,
		["title"] = "N/A"
	}
	local v_u_38 = v_u_4.mount(v_u_32(v_u_37), v_u_2.LocalPlayer:FindFirstChild("PlayerGui"), "Spectate")
	v_u_13.guiMaid:GiveTask(function()
		-- upvalues: (ref) v_u_4, (copy) v_u_38
		v_u_4.unmount(v_u_38)
	end)
	local function v41()
		-- upvalues: (ref) v_u_10, (ref) v_u_2, (copy) v_u_37, (ref) v_u_4, (copy) v_u_38, (ref) v_u_32
		local v39 = v_u_10.CameraSubject
		if v39 ~= nil and v39:IsA("Humanoid") then
			local v40 = v_u_2:GetPlayerFromCharacter(v39.Parent)
			if v40 then
				v_u_37.title = v40.DisplayName
			else
				v_u_37.title = v39.Parent.Name
			end
			v_u_4.update(v_u_38, v_u_32(v_u_37))
		end
	end
	v_u_13.guiMaid:GiveTask(v_u_10:GetPropertyChangedSignal("CameraSubject"):Connect(v41))
	v41()
	v_u_13.guiMaid:GiveTask(v_u_13.unspectate)
	return v_u_13.hideGui
end
function v_u_13.hideGui()
	-- upvalues: (copy) v_u_13
	v_u_13.guiMaid:DoCleaning()
end
return v_u_13
