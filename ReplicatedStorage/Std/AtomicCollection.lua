-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

-- Bytecode (Base64):
-- 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

-- Decompiled by Krnl

local function v_u_4(p1)
	local v2 = string.split(p1, "/")
	for v3 = #v2, 1, -1 do
		if v2[v3] == "" then
			table.remove(v2, v3)
		end
	end
	return v2
end
local function v_u_11(p5, p6)
	-- upvalues: (copy) v_u_11
	if p5.instance ~= nil then
		p5.instance = nil
		local v7 = p5.connections
		if v7 then
			for _, v8 in ipairs(v7) do
				v8:Disconnect()
			end
			table.clear(v7)
		end
		if p6 and p5.alias then
			p6[p5.alias] = nil
		end
		local v9 = p5.children
		if v9 then
			for _, v10 in pairs(v9) do
				v_u_11(v10, p6)
			end
		end
	end
end
return function(p12, p13, p_u_14)
	-- upvalues: (copy) v_u_4, (copy) v_u_11
	local v_u_15 = 1
	for _ in pairs(p13) do
		v_u_15 = v_u_15 + 1
	end
	local v16 = {}
	local v_u_17 = nil
	local function v_u_20()
		-- upvalues: (ref) v_u_17
		local v18 = v_u_17
		if v18 then
			v_u_17 = nil
			if typeof(v18) == "function" then
				v18()
				return
			end
			local v19 = task
			if typeof(v19) == "RBXScriptConnection" then
				v18:Disconnect()
				return
			end
			if v18.Destroy then
				v18:Destroy()
				return
			end
			warn("Unknown dtor return value")
		end
	end
	debug.profilebegin("initializeBoundTree")
	local v_u_21 = {
		["alias"] = "root",
		["instance"] = p12
	}
	if next(p13) then
		v_u_21.children = {}
		v_u_21.connections = {}
	end
	local v_u_22 = v_u_17
	local v_u_23 = v16
	for v24, v25 in pairs(p13) do
		local v26 = v_u_4(v25)
		local v27 = v_u_21
		for v28, v29 in ipairs(v26) do
			local v30 = v28 == #v26
			local v31 = v_u_21.children[v29] or {}
			if v30 then
				if v31.alias ~= nil then
					error("Multiple aliases assigned to one instance")
				end
				v31.alias = v24
			else
				v31.children = v31.children or {}
				v31.connections = v31.connections or {}
			end
			v_u_21.children[v29] = v31
			v_u_21 = v31
		end
		v_u_21 = v27
	end
	debug.profileend()
	local function v_u_59(p32)
		-- upvalues: (ref) v_u_23, (copy) v_u_59, (copy) v_u_20, (ref) v_u_11, (ref) v_u_15, (copy) p_u_14, (ref) v_u_22
		local v33 = p32.instance
		local v_u_34 = assert(v33)
		local v_u_35 = p32.children
		local v36 = p32.alias
		local v37 = not v_u_35
		if v36 then
			v_u_23[v36] = v_u_34
		end
		if not v37 then
			local function v40(p38)
				-- upvalues: (copy) v_u_35, (ref) v_u_59
				local v39 = v_u_35[p38.Name]
				if v39 and v39.instance == nil then
					v39.instance = p38
					v_u_59(v39)
				end
			end
			local function v47(p41)
				-- upvalues: (copy) v_u_35, (ref) v_u_20, (ref) v_u_11, (ref) v_u_23, (copy) v_u_34, (ref) v_u_59
				local v42 = p41.Name
				local v43 = v_u_35[v42]
				if v43 then
					if v43.instance == p41 then
						v_u_20()
						v_u_11(v43, v_u_23)
						local v44 = v43.instance == nil
						assert(v44)
						local v45 = v_u_34:FindFirstChild(v42)
						local v46 = v45 and v_u_35[v45.Name]
						if v46 then
							if v46.instance ~= nil then
								return
							end
							v46.instance = v45
							v_u_59(v46)
						end
					end
				else
					return
				end
			end
			for _, v48 in ipairs(v_u_34:GetChildren()) do
				local v49 = v_u_35[v48.Name]
				if v49 then
					if v49.instance == nil then
						v49.instance = v48
						v_u_59(v49)
					end
				end
			end
			local v50 = p32.connections
			local v51 = v_u_34.ChildAdded
			table.insert(v50, v51:Connect(v40))
			local v52 = p32.connections
			local v53 = v_u_34.ChildRemoved
			table.insert(v52, v53:Connect(v47))
		end
		if v37 then
			local v54 = v_u_23
			local v55 = v_u_15
			local v56 = 0
			for _ in pairs(v54) do
				v56 = v56 + 1
			end
			local v57 = v56 <= v55
			assert(v57, v56)
			if v56 == v55 then
				v_u_20()
				local v58 = p_u_14(v_u_23)
				if v58 then
					v_u_22 = v58
				end
			end
		end
	end
	debug.profilebegin("resolveBoundTree")
	v_u_59(v_u_21)
	debug.profileend()
	return function()
		-- upvalues: (copy) v_u_20, (ref) v_u_21, (ref) v_u_11, (ref) v_u_23
		v_u_20()
		if v_u_21 then
			v_u_11(v_u_21, v_u_23)
			v_u_21 = nil
		end
		v_u_23 = nil
	end
end
