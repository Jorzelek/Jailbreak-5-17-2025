-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

-- Bytecode (Base64):
-- BgM7BnN0cmluZwVzcGxpdAEvAAV0YWJsZQZyZW1vdmUJcGFyc2VQYXRoBXBhaXJzBmFzc2VydBJpc01hbmlmZXN0UmVzb2x2ZWQIaW5zdGFuY2ULY29ubmVjdGlvbnMGaXBhaXJzCkRpc2Nvbm5lY3QFY2xlYXIFYWxpYXMIY2hpbGRyZW4RdW5iaW5kTm9kZURlc2NlbmQHRGVzdHJveQtzdG9wQm91bmRGbgxzdGFydEJvdW5kRm4ETmFtZQ9wcm9jZXNzQWRkQ2hpbGQORmluZEZpcnN0Q2hpbGQScHJvY2Vzc0RlbGV0ZUNoaWxkC0dldENoaWxkcmVuCkNoaWxkQWRkZWQHQ29ubmVjdAZpbnNlcnQMQ2hpbGRSZW1vdmVkC3Byb2Nlc3NOb2RlBWRlYnVnDHByb2ZpbGViZWdpbhNpbml0aWFsaXplQm91bmRUcmVlBHJvb3QEbmV4dAVlcnJvcilNdWx0aXBsZSBhbGlhc2VzIGFzc2lnbmVkIHRvIG9uZSBpbnN0YW5jZQpwcm9maWxlZW5kEHJlc29sdmVCb3VuZFRyZWUIYmluZFJvb3QKdW5iaW5kUm9vdBFBdG9taWNCaW5kaW5nLm5ldwlHZXRUYWdnZWQEdGFzawVzcGF3bhZHZXRJbnN0YW5jZUFkZGVkU2lnbmFsGEdldEluc3RhbmNlUmVtb3ZlZFNpZ25hbAhfZHRvck1hcAxfY29ubmVjdGlvbnMTX3Jvb3RJbnN0VG9Sb290Tm9kZRNfcm9vdEluc3RUb01hbmlmZXN0DHNldG1ldGF0YWJsZQNuZXcVQXRvbWljQmluZGluZzpEZXN0cm95BGdhbWURQ29sbGVjdGlvblNlcnZpY2UKR2V0U2VydmljZQdfX2luZGV4AA0IAQAAAAATpAECAAAEAIBSAgAAbwMDAJ8BAwIcBAEAjAIBAIwD//+oAgkAhwUBBPAFBgAEAACApAUHAAAYUIBSBgEAUgcEAJ8FAwGLAvf/ggECAAgDAQMCBAAEAIADAwMEAwUDBgQAGFCAAAYHARgAAAAAAAEAAAABAAABAAAAAP4FBwAAAAAIAgAAAAAYjAIAAKQDAQAAAABAUgQAAJ8DAgQXAwEAlQICAm4D/v8BAAAA1AICAAEAAACpBAABqQQBAJ4BBAQCAAAAUgUCAKQDBAAAADBAnwMDAfEC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

-- Decompiled by Krnl

local v_u_1 = game:GetService("CollectionService")
local function v_u_5(p2)
	local v3 = string.split(p2, "/")
	for v4 = #v3, 1, -1 do
		if v3[v4] == "" then
			table.remove(v3, v4)
		end
	end
	return v3
end
local function v_u_12(p6, p7)
	-- upvalues: (copy) v_u_12
	if p6.instance ~= nil then
		p6.instance = nil
		local v8 = p6.connections
		if v8 then
			for _, v9 in ipairs(v8) do
				v9:Disconnect()
			end
			table.clear(v8)
		end
		if p7 and p6.alias then
			p7[p6.alias] = nil
		end
		local v10 = p6.children
		if v10 then
			for _, v11 in pairs(v10) do
				v_u_12(v11, p7)
			end
		end
	end
end
local v_u_13 = {}
v_u_13.__index = v_u_13
function v_u_13.new(p14, p_u_15, p_u_16)
	-- upvalues: (copy) v_u_5, (copy) v_u_12, (copy) v_u_1, (copy) v_u_13
	debug.profilebegin("AtomicBinding.new")
	local v_u_17 = 1
	local v_u_18 = {}
	local v_u_19 = {}
	local v_u_20 = {}
	local v21 = {}
	for _ in pairs(p_u_15) do
		v_u_17 = v_u_17 + 1
	end
	local function v67(p_u_22)
		-- upvalues: (copy) v_u_19, (copy) p_u_15, (ref) v_u_5, (copy) v_u_18, (ref) v_u_12, (ref) v_u_17, (copy) p_u_16
		local v23 = v_u_19[p_u_22] == nil
		assert(v23)
		local v_u_24 = {}
		v_u_19[p_u_22] = v_u_24
		debug.profilebegin("initializeBoundTree")
		local v25 = {
			["alias"] = "root",
			["instance"] = p_u_22
		}
		if next(p_u_15) then
			v25.children = {}
			v25.connections = {}
		end
		for v26, v27 in pairs(p_u_15) do
			local v28 = v_u_5(v27)
			local v29 = v25
			for v30, v31 in ipairs(v28) do
				local v32 = v30 == #v28
				local v33 = v25.children[v31] or {}
				if v32 then
					if v33.alias ~= nil then
						error("Multiple aliases assigned to one instance")
					end
					v33.alias = v26
				else
					v33.children = v33.children or {}
					v33.connections = v33.connections or {}
				end
				v25.children[v31] = v33
				v25 = v33
			end
			v25 = v29
		end
		debug.profileend()
		local function v_u_66(p34)
			-- upvalues: (copy) v_u_24, (copy) v_u_66, (copy) p_u_22, (ref) v_u_18, (ref) v_u_12, (ref) v_u_17, (ref) p_u_16
			local v35 = p34.instance
			local v_u_36 = assert(v35)
			local v_u_37 = p34.children
			local v38 = p34.alias
			local v39 = not v_u_37
			if v38 then
				v_u_24[v38] = v_u_36
			end
			if not v39 then
				local function v42(p40)
					-- upvalues: (copy) v_u_37, (ref) v_u_66
					local v41 = v_u_37[p40.Name]
					if v41 and v41.instance == nil then
						v41.instance = p40
						v_u_66(v41)
					end
				end
				local function v51(p43)
					-- upvalues: (copy) v_u_37, (ref) p_u_22, (ref) v_u_18, (ref) v_u_12, (ref) v_u_24, (copy) v_u_36, (ref) v_u_66
					local v44 = p43.Name
					local v45 = v_u_37[v44]
					if v45 then
						if v45.instance == p43 then
							local v46 = p_u_22
							local v47 = v_u_18[v46]
							if v47 then
								v47:Destroy()
								v_u_18[v46] = nil
							end
							v_u_12(v45, v_u_24)
							local v48 = v45.instance == nil
							assert(v48)
							local v49 = v_u_36:FindFirstChild(v44)
							local v50 = v49 and v_u_37[v49.Name]
							if v50 then
								if v50.instance ~= nil then
									return
								end
								v50.instance = v49
								v_u_66(v50)
							end
						end
					else
						return
					end
				end
				for _, v52 in ipairs(v_u_36:GetChildren()) do
					local v53 = v_u_37[v52.Name]
					if v53 then
						if v53.instance == nil then
							v53.instance = v52
							v_u_66(v53)
						end
					end
				end
				local v54 = p34.connections
				local v55 = v_u_36.ChildAdded
				table.insert(v54, v55:Connect(v42))
				local v56 = p34.connections
				local v57 = v_u_36.ChildRemoved
				table.insert(v56, v57:Connect(v51))
			end
			if v39 then
				local v58 = v_u_24
				local v59 = v_u_17
				local v60 = 0
				for _ in pairs(v58) do
					v60 = v60 + 1
				end
				local v61 = v60 <= v59
				assert(v61, v60)
				if v60 == v59 then
					local v62 = p_u_22
					local v63 = v_u_24
					local v64 = v_u_18[v62]
					if v64 then
						v64:Destroy()
						v_u_18[v62] = nil
					end
					local v65 = p_u_16(v63)
					if v65 then
						v_u_18[v62] = v65
					end
				end
			end
		end
		debug.profilebegin("resolveBoundTree")
		v_u_66(v25)
		debug.profileend()
	end
	local function v72(p68)
		-- upvalues: (copy) v_u_18, (copy) v_u_20, (copy) v_u_19, (ref) v_u_12
		local v69 = v_u_18[p68]
		if v69 then
			v69:Destroy()
			v_u_18[p68] = nil
		end
		local v70 = v_u_20[p68]
		if v70 then
			local v71 = v_u_19[p68]
			v_u_12(v70, (assert(v71)))
			v_u_20[p68] = nil
		end
		v_u_19[p68] = nil
	end
	for _, v73 in ipairs(v_u_1:GetTagged(p14)) do
		task.spawn(v67, v73)
	end
	local v74 = v_u_1:GetInstanceAddedSignal(p14)
	table.insert(v21, v74:Connect(v67))
	local v75 = v_u_1:GetInstanceRemovedSignal(p14)
	table.insert(v21, v75:Connect(v72))
	local v76 = v_u_13
	return setmetatable({
		["_dtorMap"] = v_u_18,
		["_connections"] = v21,
		["_rootInstToRootNode"] = v_u_20,
		["_rootInstToManifest"] = v_u_19
	}, v76)
end
function v_u_13.Destroy(p77)
	-- upvalues: (copy) v_u_12
	debug.profilebegin("AtomicBinding:Destroy")
	for _, v78 in pairs(p77._dtorMap) do
		v78:Destroy()
	end
	table.clear(p77._dtorMap)
	for _, v79 in ipairs(p77._connections) do
		v79:Disconnect()
	end
	table.clear(p77._connections)
	local v80 = p77._rootInstToManifest
	for v81, v82 in pairs(p77._rootInstToRootNode) do
		local v83 = v80[v81]
		v_u_12(v82, (assert(v83)))
	end
	table.clear(p77._rootInstToManifest)
	table.clear(p77._rootInstToRootNode)
	debug.profileend()
end
return v_u_13
