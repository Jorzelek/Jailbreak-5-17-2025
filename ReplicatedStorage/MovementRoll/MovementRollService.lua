-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

-- Bytecode (Base64):
-- BgNaB0Rlc3Ryb3kEdGFzawVkZWxheQhHZXRTdGF0ZQRFbnVtEUh1bWFub2lkU3RhdGVUeXBlB1BoeXNpY3MHUnVubmluZw9HZXRTdGF0ZUVuYWJsZWQLQ2hhbmdlU3RhdGUMUm90YXRpb25UeXBlDkNhbWVyYVJlbGF0aXZlBFVuaXQHVmVjdG9yMgNuZXcBWAFaDVBsYW5lVmVsb2NpdHkQbWFwUGxheWVyUm9sbGluZwtvblJvbGxFbmRlZARGaXJlBWRlZmVyD21hcExhc3RSb2xsVGltZQtMb2NhbFBsYXllcglDaGFyYWN0ZXILUHJpbWFyeVBhcnQGUGFyZW50CEh1bWFub2lkDkZpbmRGaXJzdENoaWxkA1NpdA1QbGF0Zm9ybVN0YW5kCVdhbGtTcGVlZAxJc1JhZ2RvbGxpbmcLSXNTa3lkaXZpbmcKSXNDcmF3bGluZw1SYXljYXN0UGFyYW1zGkZpbHRlckRlc2NlbmRhbnRzSW5zdGFuY2VzCmNvbGxpZGFibGUIUG9zaXRpb24NTW92ZURpcmVjdGlvbgZVc2VySWQJVXNlQnVkZ2V0CU1hZ25pdHVkZQZDRnJhbWUKTG9va1ZlY3RvcghJbnN0YW5jZQ5MaW5lYXJWZWxvY2l0eQ5Sb290QXR0YWNobWVudAtBdHRhY2htZW50MBZWZWxvY2l0eUNvbnN0cmFpbnRNb2RlBVBsYW5lElByaW1hcnlUYW5nZW50QXhpcxRTZWNvbmRhcnlUYW5nZW50QXhpcwxBc3NlbWJseU1hc3MITWF4Rm9yY2UIR2l2ZVRhc2sKQXR0YWNobWVudBFJbXB1bHNlQXR0YWNobWVudAROYW1lEEFsaWduT3JpZW50YXRpb24XSW1wdWxzZUFsaWduT3JpZW50YXRpb24YT3JpZW50YXRpb25BbGlnbm1lbnRNb2RlDU9uZUF0dGFjaG1lbnQETW9kZQ9SaWdpZGl0eUVuYWJsZWQLV29ybGRDRnJhbWUQTW92ZW1lbnRSZWxhdGl2ZQlIZWFydGJlYXQHQ29ubmVjdAtvblJvbGxCZWdhbgJvcwVjbG9jawthdHRlbXB0Um9sbA9pc1BsYXllclJvbGxpbmcEZ2FtZQdQbGF5ZXJzCkdldFNlcnZpY2URUmVwbGljYXRlZFN0b3JhZ2UMVXNlclNldHRp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

-- Decompiled by Krnl

local v_u_1 = game:GetService("Players")
local v2 = game:GetService("ReplicatedStorage")
local v_u_3 = UserSettings():GetService("UserGameSettings")
local v_u_4 = game:GetService("RunService")
local v_u_5 = require(v2.Game.CharacterUtil)
local v_u_6 = require(v2.Game.Falling)
local v_u_7 = require(v2.Std.Maid)
local v8 = require(v2.Std.RateLimiter)
local v_u_9 = require(v2.Std.Raycast)
local v10 = require(v2.Std.Signal)
local v_u_11 = {
	["mapPlayerRolling"] = {},
	["mapLastRollTime"] = {},
	["onRollBegan"] = v10.new(),
	["onRollEnded"] = v10.new()
}
local v_u_12 = v8.new(10, 10)
function v_u_11.attemptRoll()
	-- upvalues: (copy) v_u_1, (copy) v_u_6, (copy) v_u_5, (copy) v_u_9, (copy) v_u_11, (copy) v_u_12, (copy) v_u_7, (copy) v_u_3, (copy) v_u_4
	local v_u_13 = v_u_1.LocalPlayer
	local v14 = v_u_13.Character.PrimaryPart
	local v_u_15 = v14.Parent:FindFirstChild("Humanoid")
	if v_u_15.Sit or v_u_15.PlatformStand then
		return
	elseif v_u_15.WalkSpeed < 4 then
		return
	elseif v_u_6.IsRagdolling() then
		return
	elseif v_u_6.IsSkydiving() then
		return
	elseif v_u_5.IsCrawling then
		return
	else
		local v16 = RaycastParams.new()
		v16.FilterDescendantsInstances = { v_u_13.Character }
		if v_u_9.collidable(v14.Position, Vector3.new(-0, -1, -0), 32, v16) then
			if v_u_11.mapLastRollTime[v_u_13] == nil then
				local v_u_17 = v_u_15.MoveDirection
				if v_u_12:UseBudget(v_u_13.UserId, 1) then
					if v_u_17.Magnitude < 0.25 then
						v_u_17 = v14.CFrame.LookVector
					end
					local v_u_18 = v_u_7.new()
					local v_u_19 = Instance.new("LinearVelocity")
					v_u_19.Attachment0 = v14:FindFirstChild("RootAttachment")
					v_u_19.VelocityConstraintMode = Enum.VelocityConstraintMode.Plane
					v_u_19.PrimaryTangentAxis = Vector3.new(1, 0, 0)
					v_u_19.SecondaryTangentAxis = Vector3.new(0, 0, 1)
					v_u_19.MaxForce = v14.AssemblyMass * 500
					v_u_19.Parent = v14
					v_u_18:GiveTask(v_u_19)
					local v20 = Instance.new("Attachment")
					v20.Name = "ImpulseAttachment"
					v20.Parent = v14
					local v_u_21 = Instance.new("AlignOrientation")
					v_u_21.Name = "ImpulseAlignOrientation"
					v_u_21.Attachment0 = v20
					v_u_21.Mode = Enum.OrientationAlignmentMode.OneAttachment
					v_u_21.RigidityEnabled = true
					v_u_21.CFrame = v20.WorldCFrame
					v_u_21.Parent = v14
					v_u_18:GiveTask(function()
						-- upvalues: (copy) v_u_21
						task.delay(0.1, function()
							-- upvalues: (ref) v_u_21
							v_u_21:Destroy()
						end)
					end)
					v_u_18:GiveTask(v20)
					v_u_15:ChangeState(Enum.HumanoidStateType.Physics)
					v_u_18:GiveTask(function()
						-- upvalues: (copy) v_u_15
						if v_u_15:GetState() == Enum.HumanoidStateType.Physics and v_u_15:GetStateEnabled(Enum.HumanoidStateType.Running) then
							v_u_15:ChangeState(Enum.HumanoidStateType.Running)
						end
					end)
					if v_u_3.RotationType == Enum.RotationType.CameraRelative then
						v_u_3.RotationType = Enum.RotationType.MovementRelative
						v_u_18:GiveTask(function()
							-- upvalues: (ref) v_u_3
							v_u_3.RotationType = Enum.RotationType.CameraRelative
						end)
					end
					v_u_18:GiveTask(v_u_4.Heartbeat:Connect(function()
						-- upvalues: (ref) v_u_17, (copy) v_u_19
						local v22 = (v_u_17 * Vector3.new(1, 0, 1)).Unit * 70
						v_u_19.PlaneVelocity = Vector2.new(v22.X, v22.Z)
					end))
					v_u_11.onRollBegan:Fire(v_u_13, 0.3)
					v_u_11.mapPlayerRolling[v_u_13] = true
					v_u_18:GiveTask(function()
						-- upvalues: (ref) v_u_11, (copy) v_u_13
						v_u_11.mapPlayerRolling[v_u_13] = nil
						v_u_11.onRollEnded:Fire(v_u_13)
					end)
					v_u_18:GiveTask(task.delay(0.3, function()
						-- upvalues: (copy) v_u_18
						task.defer(v_u_18.Destroy, v_u_18)
					end))
					v_u_11.mapLastRollTime[v_u_13] = os.clock()
					task.delay(1, function()
						-- upvalues: (ref) v_u_11, (copy) v_u_13
						v_u_11.mapLastRollTime[v_u_13] = nil
					end)
					return true
				end
			end
		else
			return
		end
	end
end
function v_u_11.isPlayerRolling(p23)
	-- upvalues: (copy) v_u_11
	return v_u_11.mapPlayerRolling[p23] == true
end
return v_u_11
