-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

-- Bytecode (Base64):
-- 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

-- Decompiled by Krnl

return function()
	local v_u_1 = require(script.Parent.Store)
	local v_u_2 = require(script.Parent.thunkMiddleware)
	it("should dispatch thunks", function()
		-- upvalues: (copy) v_u_1, (copy) v_u_2
		local v3 = { v_u_2 }
		local v5 = v_u_1.new(function(p4, _)
			return p4
		end, {}, v3)
		local v_u_6 = 0
		v5:dispatch(function(_)
			-- upvalues: (ref) v_u_6
			v_u_6 = v_u_6 + 1
		end)
		expect(v_u_6).to.equal(1)
	end)
	it("should allow normal actions to pass through", function()
		-- upvalues: (copy) v_u_1, (copy) v_u_2
		local v_u_7 = 0
		local function v9(p8, _)
			-- upvalues: (ref) v_u_7
			v_u_7 = v_u_7 + 1
			return p8
		end
		local v10 = { v_u_2 }
		v_u_1.new(v9, {}, v10):dispatch({
			["type"] = "test"
		})
		expect(v_u_7).to.equal(2)
	end)
	it("should return the value from the thunk", function()
		-- upvalues: (copy) v_u_1, (copy) v_u_2
		local v11 = { v_u_2 }
		local v13 = v_u_1.new(function(p12, _)
			return p12
		end, {}, v11):dispatch(function(_)
			return "test"
		end)
		expect(v13).to.equal("test")
	end)
	it("should report errors captured in thunks via the provided error reporter", function()
		-- upvalues: (copy) v_u_1, (copy) v_u_2
		local v_u_14 = nil
		local v_u_15 = nil
		local v_u_16 = nil
		local v20 = {
			["reportReducerError"] = function(p17, p18, p19)
				-- upvalues: (ref) v_u_14, (ref) v_u_15, (ref) v_u_16
				v_u_14 = p17
				v_u_15 = p18
				v_u_16 = p19
			end
		}
		local function v21(_)
			error("thunk failed")
		end
		v_u_1.new(function(p22, _)
			return p22
		end, {
			["Value"] = 1
		}, { v_u_2 }, v20):dispatch(v21)
		expect(v_u_14.Value).to.equal(1)
		expect(v_u_15).to.equal(v21)
		expect(v_u_16.message).to.equal("Caught error in thunk")
	end)
	it("should recover and continue to update after a thunk errors", function()
		-- upvalues: (copy) v_u_1, (copy) v_u_2
		local v_u_23 = nil
		local v25 = {
			["reportReducerError"] = function(_, _, p24)
				-- upvalues: (ref) v_u_23
				v_u_23 = p24
			end
		}
		local v27 = v_u_1.new(function(p26, _)
			return p26
		end, {
			["Value"] = 1
		}, { v_u_2 }, v25)
		local v_u_28 = false
		local function v29(_)
			-- upvalues: (ref) v_u_28
			v_u_28 = true
		end
		v27:dispatch(function(_)
			error("thunk failed")
		end)
		expect(v_u_23.message).to.equal("Caught error in thunk")
		v27:dispatch(v29)
		expect(v_u_28).to.equal(true)
	end)
end
