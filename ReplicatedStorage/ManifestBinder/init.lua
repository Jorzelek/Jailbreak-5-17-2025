-- Saved by UniversalSynSaveInstance (Join to Copy Games) https://discord.gg/wx4ThpAsmw

-- Bytecode (Base64):
-- BgNhBXBhaXJzBmFzc2VydBJpc01hbmlmZXN0UmVzb2x2ZWQIaW5zdGFuY2ULY29ubmVjdGlvbnMGaXBhaXJzCkRpc2Nvbm5lY3QFdGFibGUFY2xlYXIFYWxpYXMIY2hpbGRyZW4RdW5iaW5kTm9kZURlc2NlbmQHX2xvYWRlZAR3YXJuNU1hbmlmZXN0QmluZGVyICVxIGlzIG5vdCBsb2FkZWQuIENhbGwgOlN0YXJ0KCkgb24gaXQhCF90YWdOYW1lBmZvcm1hdAxzZXRtZXRhdGFibGUFZXJyb3InQmFkIGFyZ3VtZW50ICd0YWdOYW1lJywgZXhwZWN0ZWQgc3RyaW5nJ0JhZCBhcmd1bWVudCBgbWFuaWZlc3RgLCBleHBlY3RlZCB0YWJsZQlfbWFuaWZlc3Q2QmFkIGFyZ3VtZW50IGBjb25zdHJ1Y3RvcmAsIGV4cGVjdGVkIHRhYmxlIG9yIGZ1bmN0aW9uDF9jb25zdHJ1Y3RvcgxfY29ubmVjdGlvbnMQX3Jvb3RJbnN0VG9DbGFzcxNfcm9vdEluc3RUb1Jvb3ROb2RlE19yb290SW5zdFRvTWFuaWZlc3QTX3BlbmRpbmdSb290SW5zdFNldApfbGlzdGVuZXJzE19tYW5pZmVzdFNpemVUYXJnZXQEdGFzawVkZWxheQNuZXcJX2JpbmRSb290C191bmJpbmRSb290Hk1hbmlmZXN0QmluZGVyIGFscmVhZHkgbG9hZGVkLglHZXRUYWdnZWQFc3Bhd24WR2V0SW5zdGFuY2VBZGRlZFNpZ25hbAdDb25uZWN0Bmluc2VydBhHZXRJbnN0YW5jZVJlbW92ZWRTaWduYWwFU3RhcnQUX2NsYXNzUmVtb3ZpbmdTaWduYWwERmlyZQdEZXN0cm95UltNYW5pZmVzdEJpbmRlci5fcmVtb3ZlXSAtIENsYXNzICVxIG5vIGxvbmdlciBoYXMgZGVzdHJveSwgc29tZXRoaW5nIGRlc3Ryb3llZCBpdCEIdG9zdHJpbmcMX3N0b3BCb3VuZEZuaFtNYW5pZmVzdEJpbmRlci5fc3RhcnRCb3VuZEZuXSAtIFJlLWVudGVyZWQgYWRkLiBTdGlsbCBsb2FkaW5nLCBwcm9iYWJseSBjYXVzZWQgYnkgZXJyb3IgaW4gY29uc3RydWN0b3IuBnR5cGVvZghmdW5jdGlvbi9JbnZhbGlkIGNvbnN0cnVjdG9yLCBleHBlY3RlZCB0YWJsZSBvciBmdW5jdGlvbllbTWFuaWZlc3RCaW5kZXIuX3N0YXJ0Qm91bmRGbl0gLSBGYWlsZWQgdG8gbG9hZCBpbnN0YW5jZSAlcSBvZiAlcSwgcmVtb3ZlZCB3aGlsZSBsb2FkaW5nIQtHZXRGdWxsTmFtZQR0eXBlCUNsYXNzTmFtZUFbTWFuaWZlc3RCaW5kZXIuX3N0YXJ0Qm91bmRGbl0gLSBCYWQgY2xhc3MgY29uc3RydWN0ZWQgZm9yIHRhZyAlcRFfY2xhc3NBZGRlZFNpZ25hbA1fc3RhcnRCb3VuZEZuBE5hbWUPcHJvY2Vzc0FkZENoaWxkDkZpbmRGaXJzdENoaWxkEnByb2Nlc3NEZWxldGVDaGlsZAtHZXRDaGlsZHJlbgpDaGlsZEFkZGVkDENoaWxkUmVtb3ZlZAtwcm9jZXNzTm9kZQVkZWJ1Zwxwcm9maWxlYmVnaW4TaW5pdGlhbGl6ZUJvdW5kVHJlZQRyb290BG5leHQpTXVsdGlwbGUgYWxpYXNlcyBhc3NpZ25lZCB0byBvbmUgaW5zdGFuY2UKcHJvZmlsZWVuZAlHZXRBbGxTZXQGR2V0QWxsBkdldFRhZwNHZXQHUHJvbWlzZQ9PYnNlcnZlSW5zdGFuY2UTR2V0Q2xhc3NBZGRlZFNpZ25hbBZHZXRDbGFzc1JlbW92aW5nU2lnbmFsFk1hbmlmZXN0QmluZGVyOkRlc3Ryb3kQRmFpbGVkIHRvIHJlbW92ZQRnYW1lEUNvbGxlY3Rpb25TZXJ2aWNlCkdldFNlcnZpY2URUmVwbGljYXRlZFN0b3JhZ2UHcmVxdWlyZQNTdGQGU2lnbmFsBnNjcmlwdBFwcm9taXNlQm91bmRDbGFzcwlwYXJzZVBhdGgHX19pbmRleAAZCAIAAAAAGIwCAACkAwEAAAAAQFIEAACfAwIEFwMBAJUCAgJuA/7/AQAAANQCAgABAAAAqQQAAakEAQCeAQQEAgAAAFIFAgCkAwQAAAAwQJ8DAwHxAgIAAQAAAKkDAAGpAwEAggMCAAUDAQQAAABAAgAAAAAAAPA/AwIEAAAwQAAQAwEYAAEAAAAAAf8ABAAAAAAAAAAAAAEAAAAAEQAAAAAMAgEAAAAw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

-- Decompiled by Krnl

local v_u_1 = game:GetService("CollectionService")
local v2 = game:GetService("ReplicatedStorage")
local v_u_3 = require(v2.Std.Signal)
local v_u_4 = require(script.promiseBoundClass)
local v_u_5 = require(script.parsePath)
local function v_u_12(p6, p7)
	-- upvalues: (copy) v_u_12
	if p6.instance ~= nil then
		p6.instance = nil
		local v8 = p6.connections
		if v8 then
			for _, v9 in ipairs(v8) do
				v9:Disconnect()
			end
			table.clear(v8)
		end
		if p7 and p6.alias then
			p7[p6.alias] = nil
		end
		local v10 = p6.children
		if v10 then
			for _, v11 in pairs(v10) do
				v_u_12(v11, p7)
			end
		end
	end
end
local v_u_13 = {}
v_u_13.__index = v_u_13
function v_u_13.new(p14, p15, p16)
	-- upvalues: (copy) v_u_13
	local v_u_17 = {}
	local v18 = v_u_13
	setmetatable(v_u_17, v18)
	v_u_17._tagName = p14 or error("Bad argument \'tagName\', expected string")
	v_u_17._manifest = p15 or error("Bad argument `manifest`, expected table")
	v_u_17._constructor = p16 or error("Bad argument `constructor`, expected table or function")
	v_u_17._connections = {}
	v_u_17._rootInstToClass = {}
	v_u_17._rootInstToRootNode = {}
	v_u_17._rootInstToManifest = {}
	v_u_17._pendingRootInstSet = {}
	v_u_17._listeners = {}
	local v19 = 1
	for _ in pairs(p15) do
		v19 = v19 + 1
	end
	v_u_17._manifestSizeTarget = v19
	task.delay(5, function()
		-- upvalues: (copy) v_u_17
		if not v_u_17._loaded then
			warn(("ManifestBinder %q is not loaded. Call :Start() on it!"):format(v_u_17._tagName))
		end
	end)
	return v_u_17
end
function v_u_13.Start(p_u_20)
	-- upvalues: (copy) v_u_1
	if p_u_20._loaded then
		warn("ManifestBinder already loaded.")
	else
		p_u_20._loaded = true
		for _, v21 in ipairs(v_u_1:GetTagged(p_u_20._tagName)) do
			task.spawn(p_u_20._bindRoot, p_u_20, v21)
		end
		local v22 = p_u_20._connections
		local v23 = v_u_1:GetInstanceAddedSignal(p_u_20._tagName)
		table.insert(v22, v23:Connect(function(p24)
			-- upvalues: (copy) p_u_20
			p_u_20:_bindRoot(p24)
		end))
		local v25 = p_u_20._connections
		local v26 = v_u_1:GetInstanceRemovedSignal(p_u_20._tagName)
		table.insert(v25, v26:Connect(function(p27)
			-- upvalues: (copy) p_u_20
			p_u_20:_unbindRoot(p27)
		end))
	end
end
function v_u_13._stopBoundFn(p28, p29)
	local v30 = p28._rootInstToClass[p29]
	if v30 then
		if p28._classRemovingSignal then
			p28._classRemovingSignal:Fire(v30, p29)
		end
		local v31 = p28._listeners[p29]
		if v31 then
			for v32, _ in pairs(v31) do
				task.spawn(v32, nil)
			end
		end
		if v30.Destroy then
			v30:Destroy()
		else
			local v33 = warn
			local v34 = p28._tagName
			v33(("[ManifestBinder._remove] - Class %q no longer has destroy, something destroyed it!"):format((tostring(v34))))
		end
		p28._rootInstToClass[p29] = nil
	end
end
function v_u_13._startBoundFn(p35, p36, p37)
	p35:_stopBoundFn(p36)
	if p35._pendingRootInstSet[p36] == true then
		warn("[ManifestBinder._startBoundFn] - Re-entered add. Still loading, probably caused by error in constructor.")
		return
	else
		p35._pendingRootInstSet[p36] = true
		local v38 = nil
		local v39 = p35._constructor
		if typeof(v39) == "function" then
			v38 = p35._constructor(p36, p37)
		elseif p35._constructor.new then
			v38 = p35._constructor.new(p36, p37)
		else
			error("Invalid constructor, expected table or function")
		end
		if p35._pendingRootInstSet[p36] == true then
			p35._pendingRootInstSet[p36] = nil
			if typeof(v38) == "table" then
				local v40 = v38.Destroy
				if typeof(v40) == "function" then
					p35._rootInstToClass[p36] = v38
					local v41 = p35._listeners[p36]
					if v41 then
						for v42, _ in pairs(v41) do
							task.spawn(v42, v38)
						end
					end
					if p35._classAddedSignal then
						p35._classAddedSignal:Fire(v38, p36)
					end
					return
				end
			end
			warn(("[ManifestBinder._startBoundFn] - Bad class constructed for tag %q"):format(p35._tagName))
		else
			local v43 = warn
			local v44 = p36:GetFullName()
			local v45 = p35._constructor
			local v46 = type(v45) == "table" and p35._constructor.ClassName or p35._constructor
			v43(("[ManifestBinder._startBoundFn] - Failed to load instance %q of %q, removed while loading!"):format(v44, (tostring(v46))))
		end
	end
end
function v_u_13._bindRoot(p_u_47, p_u_48)
	-- upvalues: (copy) v_u_5, (copy) v_u_12
	local v49 = p_u_47._rootInstToManifest[p_u_48] == nil
	assert(v49)
	local v_u_50 = {}
	p_u_47._rootInstToManifest[p_u_48] = v_u_50
	debug.profilebegin("initializeBoundTree")
	local v51 = {
		["alias"] = "root",
		["instance"] = p_u_48
	}
	if next(p_u_47._manifest) then
		v51.children = {}
		v51.connections = {}
	end
	p_u_47._rootInstToRootNode[p_u_48] = v51
	for v52, v53 in pairs(p_u_47._manifest) do
		local v54 = v_u_5(v53)
		local v55 = v51
		for v56, v57 in ipairs(v54) do
			local v58 = v56 == #v54
			local v59 = v51.children[v57] or {}
			if v58 then
				if v59.alias ~= nil then
					error("Multiple aliases assigned to one instance")
				end
				v59.alias = v52
			else
				v59.children = v59.children or {}
				v59.connections = v59.connections or {}
			end
			v51.children[v57] = v59
			v51 = v59
		end
		v51 = v55
	end
	debug.profileend()
	local function v_u_86(p60)
		-- upvalues: (copy) v_u_50, (copy) v_u_86, (copy) p_u_47, (copy) p_u_48, (ref) v_u_12
		local v61 = p60.instance
		local v_u_62 = assert(v61)
		local v_u_63 = p60.children
		local v64 = p60.alias
		local v65 = not v_u_63
		if v64 then
			v_u_50[v64] = v_u_62
		end
		if not v65 then
			local function v68(p66)
				-- upvalues: (copy) v_u_63, (ref) v_u_86
				local v67 = v_u_63[p66.Name]
				if v67 and v67.instance == nil then
					v67.instance = p66
					v_u_86(v67)
				end
			end
			local function v75(p69)
				-- upvalues: (copy) v_u_63, (ref) p_u_47, (ref) p_u_48, (ref) v_u_12, (ref) v_u_50, (copy) v_u_62, (ref) v_u_86
				local v70 = p69.Name
				local v71 = v_u_63[v70]
				if v71 then
					if v71.instance == p69 then
						p_u_47:_stopBoundFn(p_u_48)
						v_u_12(v71, v_u_50)
						local v72 = v71.instance == nil
						assert(v72)
						local v73 = v_u_62:FindFirstChild(v70)
						local v74 = v73 and v_u_63[v73.Name]
						if v74 then
							if v74.instance ~= nil then
								return
							end
							v74.instance = v73
							v_u_86(v74)
						end
					end
				else
					return
				end
			end
			for _, v76 in ipairs(v_u_62:GetChildren()) do
				local v77 = v_u_63[v76.Name]
				if v77 then
					if v77.instance == nil then
						v77.instance = v76
						v_u_86(v77)
					end
				end
			end
			local v78 = p60.connections
			local v79 = v_u_62.ChildAdded
			table.insert(v78, v79:Connect(v68))
			local v80 = p60.connections
			local v81 = v_u_62.ChildRemoved
			table.insert(v80, v81:Connect(v75))
		end
		if v65 then
			local v82 = v_u_50
			local v83 = p_u_47._manifestSizeTarget
			local v84 = 0
			for _ in pairs(v82) do
				v84 = v84 + 1
			end
			local v85 = v84 <= v83
			assert(v85, v84)
			if v84 == v83 then
				p_u_47:_startBoundFn(p_u_48, v_u_50)
			end
		end
	end
	v_u_86(v51)
end
function v_u_13._unbindRoot(p87, p88)
	-- upvalues: (copy) v_u_12
	p87:_stopBoundFn(p88)
	local v89 = p87._rootInstToRootNode[p88]
	if v89 then
		local v90 = p87._rootInstToManifest[p88]
		v_u_12(v89, (assert(v90)))
		p87._rootInstToRootNode[p88] = nil
	end
	p87._rootInstToManifest[p88] = nil
end
function v_u_13.GetAllSet(p91)
	return p91._rootInstToClass
end
function v_u_13.GetAll(p92)
	local v93 = {}
	for _, v94 in pairs(p92._rootInstToClass) do
		v93[#v93 + 1] = v94
	end
	return v93
end
function v_u_13.GetTag(p95)
	return p95._tagName
end
function v_u_13.Get(p96, p97)
	return p96._rootInstToClass[p97]
end
function v_u_13.Promise(p98, p99)
	-- upvalues: (copy) v_u_4
	return v_u_4(p98, p99)
end
function v_u_13.ObserveInstance(p_u_100, p_u_101, p_u_102)
	p_u_100._listeners[p_u_101] = p_u_100._listeners[p_u_101] or {}
	p_u_100._listeners[p_u_101][p_u_102] = true
	return function()
		-- upvalues: (copy) p_u_100, (copy) p_u_101, (copy) p_u_102
		if p_u_100._listeners[p_u_101] then
			p_u_100._listeners[p_u_101][p_u_102] = nil
			if not next(p_u_100._listeners[p_u_101]) then
				p_u_100._listeners[p_u_101] = nil
			end
		end
	end
end
function v_u_13.GetClassAddedSignal(p103)
	-- upvalues: (copy) v_u_3
	if p103._classAddedSignal then
		return p103._classAddedSignal
	end
	p103._classAddedSignal = v_u_3.new()
	local v104 = p103._connections
	local v105 = p103._classAddedSignal
	table.insert(v104, v105)
	return p103._classAddedSignal
end
function v_u_13.GetClassRemovingSignal(p106)
	-- upvalues: (copy) v_u_3
	if p106._classRemovingSignal then
		return p106._classRemovingSignal
	end
	p106._classRemovingSignal = v_u_3.new()
	local v107 = p106._connections
	local v108 = p106._classRemovingSignal
	table.insert(v107, v108)
	return p106._classRemovingSignal
end
function v_u_13.Destroy(p109)
	-- upvalues: (copy) v_u_12
	debug.profilebegin("ManifestBinder:Destroy")
	local v110 = next(p109._rootInstToClass)
	while v110 ~= nil do
		p109:_stopBoundFn(v110)
		local v111 = p109._rootInstToClass[v110] == nil
		assert(v111, "Failed to remove")
		v110 = next(p109._rootInstToClass)
	end
	table.clear(p109._rootInstToClass)
	for _, v112 in ipairs(p109._connections) do
		v112:Disconnect()
	end
	table.clear(p109._connections)
	local v113 = p109._rootInstToManifest
	for v114, v115 in pairs(p109._rootInstToRootNode) do
		local v116 = v113[v114]
		v_u_12(v115, (assert(v116)))
	end
	table.clear(p109._rootInstToManifest)
	table.clear(p109._rootInstToRootNode)
	debug.profileend()
end
return v_u_13
